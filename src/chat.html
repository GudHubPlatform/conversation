<div class="multi-chat">
    <div class="chat">
        ${
            conversation.messages.reduce((html, message) => {
                return html + `
                    <div class="message ${activeUserId == message.user_id ? 'me' : ''}">
                        <div class="user">
                            <div class="messenger">
                                ${
                                    message.messenger === 'telegram' ? '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><style type="text/css">	.st0{fill:url(#SVGID_1_);}	.st1{fill:#C1DAEA;}	.st2{fill:#9CC6D9;}	.st3{fill:#FFFFFF;}</style><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="256.3" y1="46.3" x2="256.3" y2="466.3">	<stop  offset="0" style="stop-color:#00B0E5"/>	<stop  offset="1" style="stop-color:#0093D4"/></linearGradient><path class="st0" d="M256.3,46.3c116,0,210,94,210,210s-94,210-210,210s-210-94-210-210S140.3,46.3,256.3,46.3z"/><path class="st1" d="M188.5,271.7l24.9,69c0,0,3.1,6.5,6.5,6.5c3.3,0,52.9-51.6,52.9-51.6L328,188.9l-138.6,65L188.5,271.7z"/><path class="st2" d="M221.5,289.3l-4.8,50.8c0,0-2,15.6,13.6,0s30.5-27.6,30.5-27.6L221.5,289.3z"/><g>	<path class="st3" d="M188.9,274.1l-51.2-16.7c0,0-6.1-2.5-4.2-8.1c0.4-1.2,1.2-2.2,3.7-3.9c11.4-7.9,210.2-79.4,210.2-79.4		s5.6-1.9,8.9-0.6c1.5,0.6,2.5,1.2,3.3,3.6c0.3,0.9,0.5,2.7,0.4,4.5c0,1.3-0.2,2.5-0.3,4.4c-1.2,19.5-37.4,165.4-37.4,165.4		s-2.2,8.5-9.9,8.8c-2.8,0.1-6.3-0.5-10.4-4c-15.2-13.1-67.9-48.5-79.6-56.3c-0.7-0.4-0.8-1-1-1.6c-0.2-0.8,0.7-1.8,0.7-1.8		s91.7-81.6,94.2-90.1c0.2-0.7-0.5-1-1.5-0.7c-6.1,2.2-111.7,68.9-123.4,76.3C190.8,274.4,188.9,274.1,188.9,274.1z"/></g></svg>' : ''
                                }
                                ${
                                    message.messenger === 'viber' ? '<svg version="1.1" id="Layer_2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><style type="text/css">	.st0-viber{fill:#6F61F1;}	.st1-viber{fill:#FFFFFF;}</style><path class="st0-viber" d="M256,46c116,0,210,94,210,210s-94,210-210,210S46,372,46,256S140,46,256,46z"/><g>	<path class="st1-viber" d="M370.9,274c-7.3,60.6-50.6,64.4-58.6,67c-3.4,1.1-35,9.1-74.6,6.5l-43,47.6v-54.9l-0.3-0.1		c-57.8-16.4-55.8-78-55.2-110.3c0.7-32.3,6.6-58.8,24.2-76.6c31.6-29.4,96.8-25,96.8-25c55.1,0.2,81.5,17.2,87.6,22.9		C368.1,169,378.5,211.6,370.9,274 M362.8,136.1c-7.2-6.8-36.5-28.5-101.6-28.8c0,0-76.8-4.7-114.2,30.4		c-20.8,21.3-28.2,52.5-28.9,91.2c-0.8,38.7-1.8,111.2,66.5,130.9h0.1v30c0,0-0.4,12.2,7.4,14.6c9.5,3,15-6.2,24-16.2		c5-5.5,11.8-13.5,16.9-19.6c46.7,4,82.6-5.2,86.7-6.5c9.4-3.1,62.8-10.1,71.5-82.6C400.1,204.7,386.9,157.4,362.8,136.1"/>	<path class="st1" d="M321.2,283.1c0,0-8.8-7.5-13-10.7c-4-3-10.4-7.1-14-9.2c-6.4-3.7-13-1.4-15.7,2.2l-5.6,7.2		c-2.9,3.7-7.3,3.1-8.5,2.8c-8.3-2.1-17.2-7.3-26.2-16.1c-9.2-8.9-14.7-18.1-16.7-27.7l-0.1-0.6c-0.5-3.9,0.1-5.8,1.7-8.5l0.3-0.2		c3.8-3.5,10.9-7.8,11.8-11.9c2.8-7.1-9.3-22-11-24.6c0,0-8.8-11.6-11.9-13.8c-3.4-2.8-8.6-4.4-13.8-1.2l-0.3,0.2		c-15.1,10.2-20.6,16.1-19.1,24.8l0.8,3.5c7.7,24.1,22.4,49.8,44.5,72.7c21.8,22.6,45.4,36.2,68.6,45.5c6,2,12.3,0.3,18.7-5.2		l0.1-0.1c4.9-4.6,8.8-9.5,11.7-14.8v-0.1C326.3,291.9,325.4,286.7,321.2,283.1"/>	<path class="st1" d="M285,230.2c-0.9,0-1.7-0.7-1.7-1.7c-0.3-6.3-2-11-5-14.2s-7.5-4.9-13.4-5.3c-1-0.1-1.7-0.9-1.6-1.9		s0.9-1.7,1.8-1.7c6.8,0.4,12,2.5,15.7,6.4c3.6,3.8,5.6,9.4,6,16.5C286.8,229.4,286.1,230.2,285,230.2L285,230.2"/>	<path class="st1" d="M302.2,236.1L302.2,236.1c-1,0-1.8-0.8-1.7-1.8c0.3-12-3.2-22.1-10.4-30.2c-3.6-4-7.9-7.2-12.9-9.4		s-10.9-3.6-17.3-4.1c-1-0.1-1.7-0.9-1.6-1.9s0.9-1.7,1.9-1.6c13.9,1,24.8,6,32.6,14.7c7.8,8.7,11.6,19.7,11.3,32.7		C303.9,235.4,303.1,236.1,302.2,236.1"/>	<path class="st1-viber" d="M319.8,243.2c-1,0-1.7-0.8-1.7-1.8c-0.1-10.6-1.7-20.2-4.8-28.5c-3.1-8.3-7.7-15.5-13.8-21.6		c-6.1-6.1-13-10.7-20.5-13.7c-7.6-3.1-16-4.7-25-4.7c-1,0-1.7-0.8-1.7-1.8s0.8-1.8,1.7-1.8l0,0c19,0.1,35.1,6.7,48,19.5		c6.4,6.4,11.3,14.1,14.6,22.9c3.2,8.7,4.9,18.7,5,29.8C321.6,242.4,320.8,243.2,319.8,243.2L319.8,243.2z"/></g></svg>' : ''
                                }
                            </div>
                            <div class="avatar">
                                <img src="${conversation.users.find(user => user.user_id == message.user_id)?.avatar_512}" alt="">
                            </div>
                            <span class="name">${conversation.users.find(user => user.user_id == message.user_id)?.fullname || 'Not Found'}</span>
                        </div>
                        <div class="content">
                            <div class="header">
                                <span class="date">
                                    ${new Date(message.timestamp).toLocaleString('uk')}
                                </span>
                            </div>
                            <p class="message">
                                ${ message.content }
                            </p>
                        </div>
                    </div>
                `
            }, '')
        }
    </div>
    <form onsubmit="sendMessage()" class="form">
        <textarea class="disable-gudhub-styles"></textarea>
        <div class="form__footer">
            <select class="messenger-select" name="messenger">
                <option value="telegram" selected>Telegram</option>
                <option value="viber">Viber</option>
            </select>
            <button class="gh-btn inline gh-btn-blue gh-btn-bg" type="submit">Send</button>
        </div>
    </form>
</div>